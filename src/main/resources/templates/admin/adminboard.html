<!DOCTYPE html>
<html xmlns:th="http://www.thymelaf.org">
<link rel="stylesheet" href="https://uicdn.toast.com/tui-grid/latest/tui-grid.css" />
<link rel="stylesheet" href="https://uicdn.toast.com/tui.pagination/latest/tui-pagination.css" />
<script src="https://uicdn.toast.com/tui.pagination/latest/tui-pagination.js"></script>
<script src="https://uicdn.toast.com/tui-grid/latest/tui-grid.js"></script>
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
<meta name="description" content="" />
<meta name="author" content="" />
<title>Dashboard - SB Admin</title>
<link href="https://cdn.jsdelivr.net/npm/simple-datatables@7.1.2/dist/style.min.css" rel="stylesheet" />
<link href="/admin/css/styles.css" rel="stylesheet" />
<script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
</head>
<body class="sb-nav-fixed">
	<th:block th:insert="~{/admin/adminmenu.html::topbar}"></th:block>
	<th:block th:insert="~{/admin/adminmenu.html::leftmenu}"></th:block>
	<div class="bodypart">

		<div id="grid"></div>
	</div>



	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
	<script src="/admin/js/scripts.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js" crossorigin="anonymous"></script>
	<script src="/admin/assets/demo/chart-area-demo.js"></script>
	<script src="/admin/assets/demo/chart-bar-demo.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/simple-datatables@7.1.2/dist/umd/simple-datatables.min.js" crossorigin="anonymous"></script>
	<script src="/admin/js/datatables-simple-demo.js"></script>
	<th:block th:insert="~{menu.html::scriptImport}">CDN JS 링크</th:block>
	<script type="text/javascript">
		const grid = new tui.Grid({
			el : document.getElementById('grid'),
			// rowHeaders : [ 'rowNum' ],
			pageOptions : {
				useClient : true,
				perPage : 15
			},
			scrollX : false,
			scrollY : false,
			columns : [ {
				header : '번호',
				name : 'board_no',
				width: 50
			}, {
				header : '제목',
				name : 'board_title',
				width: 350,
			}, {
				header : '내용',
				name : 'board_content',
				// width: 400
			}, {
				header : '작성자',
				name : 'name',
				width: 100,
			}, {
				header : '삭제 여부',
				name : 'del_yn',
				filter: 'select', // 필터
				width: 100,
				formatter: 'listItemText',
				editor : {
					type : 'select',
					options : {
						listItems : [
							 { text: '미삭제', value: "1" },
				             { text: '삭제', value: "2" },
						],
						 useViewMode: true
					}	
				},
			}, {
				header : '답변',
				name : 'ans_yn',
				filter: 'select',
				width: 130,
				formatter: 'listItemText',
				editor : {
					type : 'select',
					options : {
						listItems : [
							 { text: '미답변', value: "1" },
				             { text: '답변완료', value: "2" },
				             { text: '답변불필요', value: "3" },
						],
						 useViewMode: true
					}	
				},
			}]
		});
		
		grid.on('afterChange', ev => {
			let board_no = grid.getElement(ev.changes[0].rowKey, "board_no").firstChild.innerText;
			console.log(board_no);
			console.log(ev.changes[0].value);
		});
		
		$(document).ready(function() {
			$.ajax({
				url : "/admin/boardList",
				type : "get",
				dataType : "JSON",
				contentType : "application/json; charset=UTF-8",
				success : function(result) {
					grid.resetData(result);
				}
			});
		});
	</script>
</body>
</html>
